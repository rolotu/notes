<script>
  function pow(x, n) {
    return (n == 1) ? x : (x * pow(x, n - 1));
  }

  // alert(pow(2, 9674));


  !(() => {
    let company = {
      sales: [{ name: 'John', salary: 1000 }, { name: 'Alice', salary: 600 }],
      development: {
        sites: [{ name: 'Peter', salary: 2000 }, { name: 'Alex', salary: 1800 }],
        internals: [{ name: 'Jack', salary: 1300 }]
      }
    };

    // alert(sumSalaries(company))

    // 递归遍历
    function sumSalaries(department) {
      if (Array.isArray(department)) {
        return department.reduce((prev, current) => prev + current.salary, 0);
      } else {
        let sum = 0;
        for (let subdep of Object.values(department)) {
          sum += sumSalaries(subdep);
        }
        return sum;
      }
    }
  })()

  !(() => {
    // 链表
    let list = { value: 1 };
    list.next = { value: 2 };
    list.next.next = { value: 3 };
    list.next.next.next = { value: 4 };

    list = { value: "new item", next: list };
    list.next = list.next.next;
  })()

  !(() => {
    // alert(sumTo(3))

    function sumTo(n) {
      // let num = 0;
      // 循环
      // for(let i = n; i > 0; i--) {
      //   num += i;
      // }
      // return num;

      // 递归
      // return (n == 1) ? 1 : (n + sumTo(n - 1));

      // 等差数列求和
      return n * (n + 1) / 2;
    }
  })()

  !(() => {

    // alert(factorial(5))

    // 计算阶乘
    function factorial(n) {
      return (n == 1) ? 1 : (n * factorial(n - 1));
    }
  })()

  !(() => {
    // alert(fib(77));

    // 斐波那契数
    function fib(n) {
      let a = 1;
      let b = 1;
      for (let i = 3; i <= n; i++) {
        let c = a + b;
        a = b;
        b = c;
      }
      return b;
    }
  })()

  !(() => {

    let list = {
      value: 1,
      next: {
        value: 2,
        next: {
          value: 3,
          next: {
            value: 4,
            next: null
          }
        }
      }
    };

    // printList(list)

    // 输出一个单链表
    function printList(list) {
      // 循环
      // let tmp = list;

      // while(tmp) {
      //   alert(tmp.value)
      //   tmp = tmp.next;
      // }

      alert(list.value);
      if (list.next) {
        printList(list.next);
      }
    }

    // 反向输出单链表
    function printReverseList(list) {
      // if(list.next) {
      //   printReverseList(list.next);
      // }

      // alert(list.value);
      let arr = [];
      let tmp = list;

      while (tmp) {
        arr.push(tmp.value);
        tmp = tmp.next;
      }

      for (let i = arr.length - 1; i >= 0; i--) {
        alert(arr[i])
      }
    }
  })()
</script>