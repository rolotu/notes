<div id="progress"></div>

<script>
  // let timerId = setInterval(() => alert('tick'), 2000);

  // 递归版
  // let timerId = setTimeout(function tick() {
  //   alert('tick');
  //   timerId = setTimeout(tick, 2000);
  // }, 2000)

  // setTimeout(() => { 
  //   clearInterval(timerId); 
  //   alert('stop'); 
  // },5000);


  (() => {
    // 分割 CPU 高占用的任务

    let i = 0;
    let start = Date.now();

    function count() {

      if (i < 1e9 - 1e6) {
        setTimeout(count, 0);
      }

      do {
        i++;
      } while (i % 1e6 != 0);

      if (i == 1e9) {
        alert("Done in " + (Date.now() - start) + 'ms');
      }
    }

    // count();
  })();

  (() => {
    let i = 0;

    function count() {

      do {
        i++;
        document.getElementById('progress').innerHTML = i;
      } while (i % 1e3 != 0);

      if (i < 1e6) {
        setTimeout(count, 0);
      }
    }

    // count();
  })();

  (() => {
    function printNumbers(from, to) {
      let current = from;

      // let timer = setInterval(() => {
      //   alert(current);

      //   if(current == to) {
      //     clearInterval(timer);
      //   }
      //   current++;
      // }, 1000);

      let timer = setTimeout(function go() {
        alert(current);

        if (current < to) {
          setTimeout(go, 1000);
        }
        current++;
      }, 1000);
    }

    // printNumbers(5, 10);
  })();

  (() => {
    let i = 0;

    let start = Date.now();

    let timer = setInterval(count, 0);

    function count() {

      for (let j = 0; j < 1000000; j++) {
        i++;
      }

      if (i == 1000000000) {
        alert("Done in " + (Date.now() - start) + 'ms');
        clearInterval(timer);
      }

    }
  })();
</script>